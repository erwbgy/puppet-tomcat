{"name":"Puppet-tomcat","tagline":"","body":"# puppet-tomcat\r\n\r\nPuppet module to install Apache Tomcat and run instances as Runit services\r\nunder one or more users.\r\n\r\nThe recommended usage is to place the configuration is hiera and just:\r\n\r\n    include tomcat\r\n\r\nExample hiera config:\r\n\r\n    tomcat::files:\r\n      conf/server.xml:\r\n        mode:     '0440'\r\n        source:   'puppet:///files/tomcat/myapp/server.xml'\r\n      lib/postgresql-9.2-1002.jdbc4.jar:\r\n        source:   'puppet:///files/jdbc/postgresql-9.2-1002.jdbc4.jar'\r\n\r\n    tomcat::templates:\r\n      conf/tomcat-users.xml:\r\n        mode:     '0440'\r\n        template: '/var/lib/puppet/files/tomcat/myapp/tomcat-users.xml.erb'\r\n    \r\n    tomcat::group:     'tomcat'\r\n    \r\n    tomcat::java_home: '/usr/java/jdk1.7.0_09'\r\n    \r\n    tomcat::java_opts: '-Xms1536m -Xmx1536m -XX:MaxPermSize=512m'\r\n    \r\n    tomcat::version:   '7.0.32'\r\n    \r\n    tomcat::instances:\r\n      tomcat1:\r\n        basedir:      '/apps/tomcat1'\r\n        bind_address: %{ipaddress_eth0_1}\r\n        logdir:       '/apps/tomcat1/logs'\r\n      tomcat2:\r\n        basedir:      '/apps/tomcat2'\r\n        bind_address: %{ipaddress_eth0_2}\r\n        logdir:       '/apps/tomcat2/logs'\r\n\r\n## tomcat parameters\r\n\r\n*basedir*: The base installation directory. Default: '/opt/tomcat'\r\n\r\n*bind_address*: The IP address listen sockets are bound to. Default: $::fqdn\r\n\r\n*files*: A hash of configuration files to install - see below\r\n\r\n*group*: The user''s primary group. Default: 'tomcat',\r\n\r\n*java_home*: The base directory of the JDK installation to be used. Default:\r\n'/usr/java/latest',\r\n\r\n*java_opts*: Additional java command-line options to pass to the startup script\r\n\r\n*logdir*: The base log directory. Default: '/var/logs/tomcat'\r\n\r\n*min_mem*: The minimum heap size allocated by the JVM. Default: 1024m\r\n\r\n*max_mem*: The maximum heap size allocated by the JVM. Default: 2048m\r\n\r\n*mode*: The permissions to create files with (eg. 0444).\r\n\r\n*remove_docs*: Whether or not to remove the Tomcat docs under webapps. Default: true\r\n\r\n*remove_examples*: Whether or not to remove the Tomcat examples under webapps. Default: true\r\n\r\n*templates*: A hash of configuration templates to process and install - see below\r\n\r\n*version*: The version of the product to install (eg. 7.0.37). **Required**.\r\n\r\n*workspace*: A temporary directory to unpack install tarballs into. Default:\r\n'/root/tomcat'\r\n\r\n## tomcat::instance parameters\r\n\r\n*title*: The user the Tomcat instance runs as\r\n\r\nPlus all of the parameters specified in 'tomcat parameters' above\r\n\r\n## Config files\r\n\r\nFiles or templates for each of the Tomcat instances can be delivered via\r\nPuppet.  The former are delivered as-is while the latter are processed as ERB\r\ntemplates before being delivered.\r\n\r\nFor example configuration could be delivered using for instances running as the\r\ntomcat1 and tomcat2 users with:\r\n\r\n    tomcat::files:\r\n      conf/tomcat-users.xml:\r\n        source: 'puppet:///files/tomcat/dev/tomcat-users.xml'\r\n      \r\n    tomcat:\r\n      tomcat1:\r\n        templates:\r\n          conf/server.xml:\r\n            template: 'puppet:///files/tomcat/dev1/server.xml.erb'\r\n      tomcat2:\r\n        templates:\r\n          conf/server.xml:\r\n            template: 'puppet:///files/tomcat/dev2/server.xml.erb'\r\n\r\nValues set at the tomcat level as set for all instances so both the tomcat1 and\r\ntomcat2 instance would get the same tomcat-users.xml file.  Each instance would\r\nget their own server.xml file based on the template specified with instance\r\nvariables (like basedir and logdir) substituted.\r\n\r\nAll files are relative to the product installation.  For example if the product\r\ninstallation is '/opt/tomcat/apache-tomcat-7.0.37' then the full path to the\r\n'tomcat-users.xml' file would be\r\n'/opt/tomcat/apache-tomcat-7.0.37/conf/tomcat-users.xml'.\r\n\r\nNote that the path specified by the 'template' parameter is on the Puppet\r\nmaster.\r\n\r\n## Product files\r\n\r\nPlace the product zip files (eg. 'apache-tomcat-7.0.32.tar.gz') under a\r\n'tomcat' directory of the 'files' file store.  For example if\r\n/etc/puppet/fileserver.conf has:\r\n\r\n    [files]\r\n    path /var/lib/puppet/files\r\n\r\nthen put the zip files in /var/lib/puppet/files/tomcat.  Any files specified\r\nwith the 'files' parameter can also be placed in this directory.\r\n\r\n## Support\r\n\r\nLicense: Apache License, Version 2.0\r\n\r\nGitHub URL: https://github.com/erwbgy/puppet-tomcat\r\n","google":"UA-37513727-1","note":"Don't delete this file! It's used internally to help with page regeneration."}